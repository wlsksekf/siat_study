<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JSON + Promise + AJAX(fetch) + async/await</title>
<style>
  *{box-sizing:border-box;margin:0;padding:0}
  body{
    font-family:"맑은 고딕", Arial, sans-serif;
    background:#f6f7fb;
    padding:28px;
    line-height:1.75;
    color:#111827;
  }
  .wrap{max-width:1100px;margin:0 auto;}
  header{
    background:linear-gradient(135deg,#1d4ed8,#2563eb,#0ea5e9);
    color:#fff;
    border-radius:16px;
    padding:20px 22px 18px;
    box-shadow:0 16px 40px rgba(0,0,0,0.12);
    margin-bottom:16px;
  }
  header h1{font-size:22px;margin-bottom:6px}
  header p{opacity:.95;font-size:14px}

  .card{
    background:#fff;
    border:1px solid #e5e7eb;
    border-radius:16px;
    box-shadow:0 16px 40px rgba(0,0,0,0.08);
    overflow:hidden;
    margin:14px 0;
  }
  .hd{
    background:#f9fafb;
    border-bottom:1px solid #e5e7eb;
    padding:14px 16px;
    font-weight:700;
    display:flex;
    align-items:center;
    justify-content:space-between;
    gap:10px;
    flex-wrap:wrap;
  }
  .bd{padding:16px;}
  .badge{
    display:inline-block;
    font-size:12px;
    padding:2px 10px;
    border-radius:999px;
    border:1px solid #bae6fd;
    background:#e0f2fe;
    color:#075985;
  }

  .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
  @media (max-width:920px){.grid{grid-template-columns:1fr}}

  .note{
    border:1px solid #e5e7eb;
    background:#fcfcfd;
    border-radius:12px;
    padding:12px 14px;
  }
  .callout{
    border-left:4px solid #2563eb;
    padding:10px 12px;
    background:#eff6ff;
    border-radius:10px;
    color:#0f172a;
  }
  .mini{font-size:13px;color:#374151}
  ul,ol{padding-left:18px}
  li{margin:6px 0}

  code, pre{
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace;
  }
  
 .grid > * {
  min-width: 0;
}

pre{
  background:#0b1020;
  color:#e5e7eb;
  border-radius:12px;
  padding:14px;
  overflow:auto;
  margin-top:10px;
  width:100%;
  display:block;
}
  .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
  input,button,select{
    padding:10px 12px;
    font-size:14px;
    border-radius:10px;
    border:1px solid #d1d5db;
    outline:none;
    background:#fff;
  }
  button{
    cursor:pointer;
    border:1px solid #93c5fd;
    background:#eff6ff;
    font-weight:700;
  }
  button:hover{background:#dbeafe}
  .status{
    margin-top:10px;
    font-weight:700;
    color:#0f172a;
  }

  table{
    width:100%;
    border-collapse:collapse;
    margin-top:12px;
    background:#fff;
    border:1px solid #e5e7eb;
    border-radius:12px;
    overflow:hidden;
  }
  th,td{
    border-bottom:1px solid #e5e7eb;
    padding:10px;
    text-align:center;
    font-size:14px;
  }
  th{
    background:#f3f4f6;
    font-weight:800;
  }

  .suggest-wrap{position:relative;max-width:420px}
  #suggest{
    display:none;
    position:absolute;
    top:44px;
    left:0;
    width:100%;
    border:1px solid #d1d5db;
    background:#fff;
    border-radius:10px;
    overflow:hidden;
    box-shadow:0 12px 26px rgba(0,0,0,0.10);
    z-index:10;
  }
  #suggest div{
    padding:10px 12px;
    cursor:pointer;
    font-size:14px;
  }
  #suggest div:hover{background:#eff6ff}

  .pill{
    display:inline-block;
    padding:4px 10px;
    border-radius:999px;
    border:1px solid #e5e7eb;
    background:#f9fafb;
    font-size:12px;
    color:#374151;
    margin-right:6px;
    margin-top:6px;
  }
  .hr{height:1px;background:#e5e7eb;margin:14px 0}
</style>
</head>
<body>
<div class="wrap">

<header>
  <h1>JSON + Promise + AJAX(fetch) + async/await</h1>
  <p>JSON 의미, JSON.parse(), JSON.stringify()</p>
  <p>Promise 개념/사용법 → fetch(then) → async/await fetch 로 발전 과정까지 한 번에 정리합니다.</p>
</header>



<!-- 1) JSON 의미 -->
<section class="card">
  <div class="hd">
    <span>1. JSON이란?</span>
    <span class="badge">개념</span>
  </div>
  <div class="bd">
    <div class="callout">
      <b>JSON</b>(JavaScript Object Notation)은 <b>데이터를 주고받기 위한 문자열 형식</b>입니다.<br>
      자바스크립트 객체/배열처럼 보이지만, 실제로는 <b>텍스트(문자열)</b>입니다.
    </div>

    <div class="grid" style="margin-top:12px">
      <div class="note">
        <p><b>왜 JSON을 쓰나요?</b></p>
        <ul>
          <li>서버 ↔ 브라우저 사이에서 데이터를 보내기 쉽습니다.</li>
          <li>구조가 단순하고 가볍습니다.</li>
          <li>언어가 달라도(자바/파이썬 등) 공통 형식으로 쓰기 좋습니다.</li>
        </ul>
      </div>
      <div class="note">
        <p><b>주의할 점</b></p>
        <ul>
          <li>JSON은 <b>키(key)를 반드시 큰따옴표</b>로 감싸는 것이 원칙입니다.</li>
          <li>함수, undefined 같은 값은 JSON에 넣기 어렵습니다.</li>
        </ul>
      </div>
    </div>

<pre><code>// JSON 예시(문자열로 주고받는 데이터)
{
  "id": 1,
  "name": "김하나",
  "age": 25,
  "city": "Seoul"
}

// 배열 형태도 가능
[
  {"id":1, "name":"김하나"},
  {"id":2, "name":"이둘"}
]</code></pre>
  </div>
</section>

<!-- 2) JSON.parse / JSON.stringify -->
<section class="card">
  <div class="hd">
    <span>2. JSON.parse() / JSON.stringify()</span>
    <span class="badge">필수 함수</span>
  </div>
  <div class="bd">
    <div class="grid">
      <div class="note">
        <p><b>JSON.parse() 의미</b></p>
        <p class="mini">JSON <b>문자열</b> → 자바스크립트 <b>객체/배열</b>로 변환합니다.</p>
<pre><code>// 문자열(JSON) → 객체
const jsonText = '{"name":"Kim","age":25}';
const obj = JSON.parse(jsonText);

console.log(obj.name); // Kim
console.log(obj.age);  // 25</code></pre>
      </div>

      <div class="note">
        <p><b>JSON.stringify() 의미</b></p>
        <p class="mini">자바스크립트 <b>객체/배열</b> → JSON <b>문자열</b>로 변환합니다.</p>
<pre><code>// 객체 → 문자열(JSON)
const user = { name:"Lee", age:30 };
const jsonText = JSON.stringify(user);

console.log(jsonText);
// {"name":"Lee","age":30}</code></pre>
      </div>
    </div>

    <div class="note" style="margin-top:12px">
      <p><b>실전 포인트</b></p>
      <ul>
        <li>서버에서 오는 데이터는 보통 JSON이므로, <b>response.json()</b>으로 객체/배열로 변환해 사용합니다.</li>
        <li>서버로 보낼 때는 객체를 JSON 문자열로 만들어야 하므로, <b>JSON.stringify()</b>를 씁니다.</li>
      </ul>
    </div>
  </div>
</section>

<!-- 3) Promise 개념 -->
<!-- 3) Promise 개념 -->
<section class="card">
  <div class="hd">
    <span>3. Promise란?</span>
    <span class="badge">비동기 핵심</span>
  </div>
  <div class="bd">
    <div class="callout">
      <b>Promise</b>는 “<b>지금은 결과가 없지만</b>, <b>나중에 성공/실패 결과를 알려주겠다</b>”는 <b>약속 객체</b>입니다.<br>
      즉, 시간이 걸리는 작업(서버 통신, 파일 읽기 등)을 처리할 때 사용합니다.
    </div>

    <div class="grid" style="margin-top:12px">
      <div class="note">
        <p><b>Promise의 상태 3가지</b></p>
        <ul>
          <li><b>pending</b> : 처리 중(결과 아직 없음)</li>
          <li><b>fulfilled</b> : 성공(결과 있음)</li>
          <li><b>rejected</b> : 실패(에러 있음)</li>
        </ul>
        <div class="hr"></div>
        <p class="mini"><b>then / catch / finally</b></p>
        <ul>
          <li><b>then</b> : 성공했을 때 실행됩니다.</li>
          <li><b>catch</b> : 실패했을 때 실행됩니다.</li>
          <li><b>finally</b> : 성공/실패 상관없이 마지막에 실행됩니다.</li>
        </ul>
      </div>

      <div class="note">
        <p><b>Promise 기본 예제</b></p>
<pre><code>const p = new Promise(function(resolve, reject){
  // 1초 뒤 성공한다고 가정
  setTimeout(function(){
    const ok = true;

    if(ok){
      resolve("성공 데이터");
    }else{
      reject(new Error("실패 이유"));
    }
  }, 1000);
});

p.then(function(result){
  console.log("성공:", result);
}).catch(function(err){
  console.log("실패:", err.message);
}).finally(function(){
  console.log("마무리(항상 실행)");
});</code></pre>

        <!-- ✅ 여기 추가 -->
        <div class="note" style="margin-top:12px">
          <p><b>resolve / reject는 무엇인가요?</b></p>
          <ul>
            <li>
              <b>resolve(값)</b> : Promise를 <b>성공(fulfilled)</b> 상태로 바꾸는 함수입니다.<br>
              resolve에 전달한 값은 나중에 <b>then(result)</b>의 <b>result</b>로 전달됩니다.
            </li>
            <li>
              <b>reject(이유)</b> : Promise를 <b>실패(rejected)</b> 상태로 바꾸는 함수입니다.<br>
              reject에 전달한 값(보통 Error 객체)은 나중에 <b>catch(err)</b>의 <b>err</b>로 전달됩니다.
            </li>
          </ul>

<pre><code>// 흐름 요약
// resolve("A")  → then(function(result){ result === "A" })
//
// reject(Error) → catch(function(err){ err는 Error 객체 })</code></pre>
        </div>
        <!-- ✅ 여기까지 -->
      </div>
    </div>

    <div class="note" style="margin-top:12px">
      <p><b>왜 Promise가 필요하나요?</b></p>
      <ul>
        <li>서버 응답은 <b>즉시</b> 오지 않습니다(시간이 걸립니다).</li>
        <li>그래서 결과를 “나중에” 받기 위한 표준 방식이 Promise입니다.</li>
        <li><b>fetch()</b>는 대표적인 Promise 기반 API입니다.</li>
      </ul>
    </div>
  </div>
</section>


<!-- 4) AJAX / fetch -->
<section class="card">
  <div class="hd">
    <span>4. AJAX와 fetch</span>
    <span class="badge">통신</span>
  </div>
  <div class="bd">
    <div class="callout">
      <b>AJAX</b>(Asynchronous JavaScript And XML)는 <b>페이지를 새로고침하지 않고</b><br>
      서버와 통신해서 데이터를 받아오고, 화면(DOM)을 갱신하는 방식입니다.
    </div>

    <div class="grid" style="margin-top:12px">
      <div class="note">
        <p><b>fetch란?</b></p>
        <ul>
          <li>브라우저에서 HTTP 요청을 보내는 API입니다.</li>
          <li><b>Promise를 반환합니다.</b> (그래서 then/catch 가능)</li>
          <li>응답 본문을 JSON으로 바꾸려면 <b>response.json()</b>을 사용합니다.</li>
        </ul>
      </div>

     <!-- fetch() 기본 흐름 설명 추가 -->
<div class="note" style="margin-top:12px">
  <p><b>fetch() 기본 흐름 정리</b></p>
  <ul>
    <li>
      <b>1. fetch(url)</b>  
      → 서버에 요청을 보내고 <b>Promise(Response 객체)</b>를 반환합니다.
    </li>
    <li>
      <b>2. then(response)</b>  
      → 서버가 응답을 보내면 <b>Response 객체</b>를 받을 수 있습니다.
    </li>
    <li>
      <b>3. response.ok / response.status</b>  
      → HTTP 요청 성공 여부를 확인합니다.
    </li>
    <li>
      <b>4. response.json()</b>  
      → 응답 본문(JSON 문자열)을 <b>자바스크립트 객체</b>로 변환합니다.  
      → 이 또한 <b>Promise</b>를 반환합니다.
    </li>
    <li>
      <b>5. then(data)</b>  
      → 변환된 JSON 데이터를 이용해 화면(DOM)을 갱신합니다.
    </li>
    <li>
      <b>6. catch(error)</b>  
      → 요청 또는 변환 과정에서 오류가 발생하면 처리합니다.
    </li>
  </ul>

<pre><code>// 전체 흐름 한눈에 보기
fetch("data/users.json")      // ① 요청 → Promise 반환
  .then(response => response.json()) // ② JSON 변환 → Promise 반환
  .then(data => console.log(data))   // ③ 데이터 사용
  .catch(error => console.log(error)); // ④ 오류 처리</code></pre>
</div>


<pre style="width: 100%;"><code>// fetch는 Promise를 반환합니다(then으로 연결 가능)
fetch("data/users.json")
  .then(function(response){
    // HTTP 자체가 성공(200대)인지 확인
    if(!response.ok){
      throw new Error("HTTP 상태 코드: " + response.status);
    }
    return response.json(); // 이것도 Promise입니다!
  })
  .then(function(data){
    console.log("받은 데이터:", data);
  })
  .catch(function(err){
    console.log("에러:", err.message);
  });</code></pre>
  </div>
</section>

<!-- 5) 변화 과정: then → async/await -->
<section class="card">
  <div class="hd">
    <span>5. 변화 과정: then 체인 → async/await</span>
    <span class="badge">발전</span>
  </div>
  <div class="bd">
    <div class="note">
      <p><b>왜 async/await를 쓰나요?</b></p>
      <ul>
        <li>then이 길어지면 읽기 어려울 수 있습니다.</li>
        <li>async/await는 비동기 코드를 <b>동기 코드처럼</b> 읽히게 만들어 줍니다.</li>
        <li>Promise 기반 API(fetch 등)에서 특히 많이 씁니다.</li>
      </ul>
      <div class="hr"></div>
      <p class="mini">
        <span class="pill">then/catch</span>
        Promise 결과를 콜백(then/catch)으로 이어붙입니다.
      </p>
      <p class="mini">
        <span class="pill">async/await</span>
        Promise가 끝날 때까지 기다리는 것처럼 작성합니다(내부적으로 Promise를 사용합니다).
      </p>
    </div>

    <div class="grid" style="margin-top:12px">
      <div class="note">
        <p><b>(1) then/catch 방식</b></p>
<pre><code>function loadWithThen(){
  fetch("data/users.json")
    .then(function(response){
      if(!response.ok){
        throw new Error("HTTP 상태 코드: " + response.status);
      }
      return response.json();
    })
    .then(function(data){
      console.log("데이터:", data);
    })
    .catch(function(err){
      console.log("에러:", err.message);
    });
}</code></pre>
      </div>

      <div class="note">
        <p><b>(2) async/await 방식</b></p>
<pre><code>async function loadWithAsyncAwait(){
  try{
    const response = await fetch("data/users.json");

    if(!response.ok){
      throw new Error("HTTP 상태 코드: " + response.status);
    }

    const data = await response.json();
    console.log("데이터:", data);
  }catch(err){
    console.log("에러:", err.message);
  }
}</code></pre>
      </div>
    </div>

    <div class="note" style="margin-top:12px">
      <ul>
        <li><b>fetch()</b>는 Promise를 반환합니다.</li>
        <li><b>response.json()</b>도 Promise를 반환합니다.</li>
        <li>그래서 async/await에서는 <b>await를 2번</b> 쓰는 형태가 자주 나옵니다.</li>
      </ul>
    </div>
  </div>
</section>



<!-- 7) 최종 정리 -->
<section class="card">
  <div class="hd">
    <span>정리</span>
    <span class="badge">요약</span>
  </div>
  <div class="bd">
    <div class="note">
      <ul>
        <li><b>JSON</b>은 데이터를 주고받기 위한 <b>문자열 형식</b>입니다.</li>
        <li><b>Promise</b>는 “나중에 결과(성공/실패)를 알려주는 약속 객체”입니다.</li>
        <li><b>fetch</b>는 Promise 기반의 통신 API이며, <b>fetch()</b>와 <b>response.json()</b> 모두 Promise를 반환합니다.</li>
        <li><b>then/catch</b>로 Promise를 연결할 수 있고, 더 읽기 쉽게 <b>async/await</b>로도 작성할 수 있습니다.</li>
        <li>실습 흐름은 <b>이벤트 → fetch → JSON 처리 → DOM 업데이트</b>로 연결됩니다.</li>
      </ul>
    </div>
  </div>
</section>

</div>




</body>
</html>
