<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<link href="css/ex0403_2.css" rel="stylesheet">
</head>
<body>
<div class="container">
    <h2>Promise</h2>
    <input id="msg" type="text" placeholder="메시지를 입력하세요">
    <p>실행하기 버튼 누르면 성공 혹은 실패 실행됨</p>
    <button id="btn">Promise 실행하기</button>
    <div id="log"></div>
</div>

<script>
    const msg = document.getElementById("msg");
    const btn = document.getElementById("btn");
    const log = document.getElementById("log");

    btn.addEventListener("click", runPromise);

    function runPromise(){
        log.classList.remove("success", "error");
        log.innerHTML = `<span class="status-label">Loading...</span>비동기 작업 처리 중...`;

        const msg = document.getElementById("msg").value.trim();
        const p = new Promise(function(resolve, reject) {
            setTimeout(function() {
                if (msg) {
                    resolve("2초 후 성공!");
                } else {
                    reject("메세지를 입력하세요");
                }
            }, 2000);
        });

        p.then(function(result){
        log.classList.add("success");
        log.innerHTML = `<span class="status-label">Success</span>${result}`;
        })
        .catch(function(err){
        log.classList.add("error");
        log.innerHTML = `<span class="status-label">Error</span>${err}`;
        });
    }
</script>
</body>
</html>